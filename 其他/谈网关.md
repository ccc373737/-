###网关的作用

现代微服务架构下，一个大项目通常被拆分为多个服务，但是像鉴权，流量控制，监控日志等功能，这一类非业务的功能确实每个服务都需要的，
于是出现一个统一的入口做这些功能的处理。

####统一监控 
网关作为系统和外部联通的出入口，这里就可以记录请求报文，响应报文，链路时间等从而监控服务。

####鉴权，安全认证

对于一个外部用户，可以网关层鉴权判断用户可以访问哪些服务，不能访问哪些服务。

####请求路由，服务泛化

某些服务升级的场景，新老服务混用的情况下，可以网关做到api维度甚至用户维度的访问控制。
而内部如果出现不同服务请求协议不同的情况下，也可以用网关层做协议的转化，甚至实现的自己的统一协议，对外仍然暴露的是相同协议的请求接口。

####请求限流

限流(Ratelimiting)指对应用服务的请求进行限制，例如某一接口的请求限制为 100 个每秒,对超过限制的请求则进行快速失败或丢弃。
不同服务的承受能力可能不同，可以在网关上对不同服务做指定的限制。

常用的限流算法如下：

1.固定窗口计数器算法

- 将时间划分为多个窗口。
- 在每个窗口内每有一次请求就将计数器加一。
- 如果计数器超过了限制数量，则本窗口内所有的请求都被丢弃当时间到达下一个窗口时，计数器重置。。

