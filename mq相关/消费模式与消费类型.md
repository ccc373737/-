### 1.消费模式

- 集群消费：集群服务场景，每条消息只会分发到集群中的某一个节点，相同的节点有相同的Group Id。

- 广播消费：mq会将消息推送给所有订阅topic的consumer，也就不存在负载均衡等概念，commitLog的数据会分发给topic下面的所有queue，即每一个消费者，
注意广播模式下不会重投消息

- 集群模拟广播：

每一个consumer代表了一个集群，只是一个集群中只有一个节点

### 2.消息类型

- 普通消息：最常见的无特性消息

- 定时延迟消息：消息发送到commitLog之后，先会存储到一个特殊的topic中（schedule_topic_xxx）,消息系统会有不同延迟级别的队列，
最接近到期的队列可能轮询频率高，等延迟时间到了之后，才将消息分配给不同的topic，这时才对consumer端可见。

***
- 顺序消费：
    1. 全局顺序：对于某个指定的topic遵循FIFO
    2. 分区顺序：对于某个指定的topic同时还要指定sharing key，这部分数据FIFO
    
执行步骤如下：

1. 消息顺序发布，对于一批特定的数据，保证单线程同步发送

2. 发送到commitLog中后，会有一个selector根据sharing key哈希等算法得到一个确定的queue，所有消息都将进入这个queue中，保证按顺序给消费者

3. queue中的消息同时间只能由一个消费者消费。  
