### 1.B+树索引

B+树定义

- 有k个子树的中间节点包括了k个元素，中间节点只保存索引，所有的数据都保存在叶子节点上

- 所有叶子节点中包含了全部元素的信息或者指向这些元素的指针，且叶子节点按顺序自小到大形成链表的结构

- 所有的中间节点元素同时存在于子节点，且在子节点元素是最大(最小)元素

使用B+树作为索引的优势

- B+树在中间节点上不保存数据信息，因此内存上可以存在更多的信息，有更好的性能和局部性

- B+树叶子节点相连，因此遍历数据只需要遍历一次叶子节点，而且这样的结构对区间查询更加友好

- 每次查询都最终会走到叶子节点，查询性能稳定

### 2. 聚簇与非聚簇索引

非聚簇索引的索引文件和数据文件是分开的，如MyIsam，叶子节点中实际上存储的是指向存放数据物理区域的指针。
而聚簇索引中每个叶子节点包括主键值，事务ID，回滚指针等，如InnnoDB，聚簇索引有如下优势

- 由于数据和叶子节点存储在一起，这样主键和行数据是一起被载入内存的，找到叶子节点就可以立刻返回数据，
非聚簇索引的每次查找可能额外多出一次IO

- 聚簇索引在排序和范围查找的场景比非聚簇索引性能高，非聚簇索引的物理地址必然是无序的

而也由于聚簇索引的顺序即是数据物理地址的顺序，所以一个表最多只能有一个聚簇索引，InnnoDB中必须有且只有一个主键用于组织聚簇索引
（如果不指定，mysql会隐式生成id作为聚簇索引）。

InnoDB中的主键非特殊需要务必使用自增id作为主键，这样每次插入新的数据，都会顺序记录到当前索引节点的后续位置，如果使用非单调的主键为了维持这个顺序性而频繁调整索引的位置，
严重影响插入的性能。

InnoDB的辅助索引即是一种非聚簇索引，这种索引的叶子节点中存放的主键的值，所以辅助索引的流程是检查辅助索引得到主键的值，
然后用主键再去主索引中获取记录，这个过程称为回表，也由于辅助索引回表的特征，主键字段也不宜过长，过长的主键会使辅助索引的数据量变大。

