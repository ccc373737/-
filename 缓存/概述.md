### 1. 缓存概述

计算机中所有的缓存本质上是一个临时文件交换区，其基本思想就是以空间换时间，这样的设计随处可见，例如CPU多级缓存和内存加速CPU访问数据，CDN缓存加速用户访问资源，浏览器缓存等。

而业务层随着并发量的增加，数据库压力增大，会出现访问数据缓慢的情况，于是在数据库和应用系统中加入一个高速的文件存储区，将一些高频使用的数据放入缓存中，如果被命中会减少数据库的压力并显著提升速度。


### 2. 缓存的几个指标

在业务层缓存的最关键指标：**命中率**

命中率=命中数/所有命令，命中率取决于缓存空间大小，缓存淘汰策略，缓存生存周期以及具体的业务场景等，显然，对于一个系统而言，缓存的命中率越高，意味这缓存的模型越精确，这是系统中可量化的优化方向。

### 3. 缓存的问题

缓存虽然加速了数据的获取，但是系统中引入缓存也会带来问题

- 加入缓存后需要维护数据库与缓存的一致性，如果是分布式系统，那么需要维护不同节点的一致性，其增加了业务的复杂度，尤其是分布式缓存集群，同步和可用需要进行取舍。

因此对于一些超强一致性的场景，那么请不要使用缓存，多多少少会出现不一致的情况，如果是频繁更新的数据在需要在缓存和数据库之间频繁交换数据，这种情况也要慎用缓存。

### 4. 本地缓存和分布式缓存

本地缓存通常使用Ehcache和spring的Spring cache，本地缓存本质上是以key-value的形式直接存在JVM的内存区域，快速，轻量，成本低，唯一的问题在于多个服务器之间无法进行数据共享。

所以这类缓存通常用于小型应用和中大型应用的**基础数据**，基础数据指例如配置选项这类大部分时间只读不改的数据，这样不同服务器不一致的问题就会很少见。

而现代应用框架下，必然会引入分布式缓存，即缓存单独部署在服务器上，那么应用集群不管有多少机器，访问的缓存都是同一份，Redis和Memcached就是扮演这样的角色。